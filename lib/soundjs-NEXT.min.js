/**
* SoundJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011 gskinner.com, inc.
* 
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
**/
this.createjs=this.createjs||{};
(function(){var a=function(a,c,b){this.initialize(a,c,b)},d=a.prototype;d.type=null;d.target=null;d.currentTarget=null;d.eventPhase=0;d.bubbles=!1;d.cancelable=!1;d.timeStamp=0;d.defaultPrevented=!1;d.propagationStopped=!1;d.immediatePropagationStopped=!1;d.initialize=function(a,c,b){this.type=a;this.bubbles=c;this.cancelable=b;this.timeStamp=(new Date).getTime()};d.preventDefault=function(){this.defaultPrevented=!0};d.stopPropagation=function(){this.propagationStopped=!0};d.stopImmediatePropagation=
function(){this.immediatePropagationStopped=this.propagationStopped=!0};d.clone=function(){return new a(this.type,this.bubbles,this.cancelable)};d.toString=function(){return"[Event (type="+this.type+")]"};createjs.Event=a})();this.createjs=this.createjs||{};
(function(){var a=function(){this.initialize()},d=a.prototype;a.initialize=function(a){a.addEventListener=d.addEventListener;a.removeEventListener=d.removeEventListener;a.removeAllEventListeners=d.removeAllEventListeners;a.hasEventListener=d.hasEventListener;a.dispatchEvent=d.dispatchEvent;a._dispatchEvent=d._dispatchEvent};d._listeners=null;d._captureListeners=null;d.initialize=function(){};d.addEventListener=function(a,c,b){var g;g=b?this._captureListeners=this._captureListeners||{}:this._listeners=
this._listeners||{};var j=g[a];j?(this.removeEventListener(a,c,b),j.push(c)):g[a]=[c];return c};d.removeEventListener=function(a,c,b){if(b=b?this._captureListeners:this._listeners){var g=b[a];if(g)for(var j=0,e=g.length;j<e;j++)if(g[j]==c){1==e?delete b[a]:g.splice(j,1);break}}};d.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null};d.dispatchEvent=function(a,c){if("string"==
typeof a){var b=this._listeners;if(!b||!b[a])return!1;a=new createjs.Event(a)}a.target=c||this;if(!a.bubbles||!this.parent)this._dispatchEvent(a,this,2);else{for(var g=this,b=[g];g.parent;)b.push(g=g.parent);for(var j=b.length,g=j-1;0<=g&&!a.propagationStopped;g--)b[g]._dispatchEvent(a,b[g],1+(0==g));for(g=1;g<j&&!a.propagationStopped;g++)b[g]._dispatchEvent(a,b[g],3)}return a.defaultPrevented};d.hasEventListener=function(a){var c=this._listeners,b=this._captureListeners;return!!(c&&c[a]||b&&b[a])};
d.toString=function(){return"[EventDispatcher]"};d._dispatchEvent=function(a,c,b){var g,j=!1,e=1==b?this._captureListeners:this._listeners;if(a&&e&&(e=e[a.type])&&(g=e.length)){a.currentTarget=c;a.eventPhase=b;e=e.slice();for(c=0;c<g&&!a.immediatePropagationStopped;c++)b=e[c],j=b.handleEvent?j||b.handleEvent(a):j||b(a)}};createjs.EventDispatcher=a})();this.createjs=this.createjs||{};
(function(){function a(){throw"Sound cannot be instantiated";}function d(b,a){this.init(b,a)}function f(){}a.DELIMITER="|";a.AUDIO_TIMEOUT=8E3;a.INTERRUPT_ANY="any";a.INTERRUPT_EARLY="early";a.INTERRUPT_LATE="late";a.INTERRUPT_NONE="none";a.PLAY_INITED="playInited";a.PLAY_SUCCEEDED="playSucceeded";a.PLAY_INTERRUPTED="playInterrupted";a.PLAY_FINISHED="playFinished";a.PLAY_FAILED="playFailed";a.SUPPORTED_EXTENSIONS="mp3 ogg mpeg wav m4a mp4 aiff wma mid".split(" ");a.EXTENSION_MAP={m4a:"mp4"};a.FILE_PATTERN=
/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/;a.defaultInterruptBehavior=a.INTERRUPT_NONE;a.lastId=0;a.activePlugin=null;a.pluginsRegistered=!1;a.masterVolume=1;a.masterMute=!1;a.instances=[];a.idHash={};a.preloadHash={};a.defaultSoundInstance=null;a.addEventListener=null;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a.sendFileLoadEvent=function(b){if(a.preloadHash[b])for(var g=
0,c=a.preloadHash[b].length;g<c;g++){var e=a.preloadHash[b][g];a.preloadHash[b][g]=!0;if(a.hasEventListener("fileload")){var d=new createjs.Event("fileload");d.src=e.src;d.id=e.id;d.data=e.data;a.dispatchEvent(d)}}};a.getPreloadHandlers=function(){return{callback:createjs.proxy(a.initLoad,a),types:["sound"],extensions:a.SUPPORTED_EXTENSIONS}};a.registerPlugin=function(b){a.pluginsRegistered=!0;return null==b?!1:b.isSupported()?(a.activePlugin=new b,!0):!1};a.registerPlugins=function(b){for(var g=
0,c=b.length;g<c;g++)if(a.registerPlugin(b[g]))return!0;return!1};a.initializeDefaultPlugins=function(){return null!=a.activePlugin?!0:a.pluginsRegistered?!1:a.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1};a.isReady=function(){return null!=a.activePlugin};a.getCapabilities=function(){return null==a.activePlugin?null:a.activePlugin.capabilities};a.getCapability=function(b){return null==a.activePlugin?null:a.activePlugin.capabilities[b]};a.initLoad=function(b,g,c,e,d){b=
a.registerSound(b,c,e,!1,d);return null==b?!1:b};a.registerSound=function(b,g,c,e,l){if(!a.initializeDefaultPlugins())return!1;b instanceof Object&&(l=g,g=b.id,c=b.data,b=b.src);var h=a.parsePath(b,"sound",g,c);if(null==h)return!1;null!=g&&(a.idHash[g]=h.src);var k=null;null!=c&&(isNaN(c.channels)?isNaN(c)||(k=parseInt(c)):k=parseInt(c.channels));var f=a.activePlugin.register(h.src,k);null!=f&&(null!=f.numChannels&&(k=f.numChannels),d.create(h.src,k),null==c||!isNaN(c)?c=h.data=k||d.maxPerChannel():
c.channels=h.data.channels=k||d.maxPerChannel(),null!=f.tag?h.tag=f.tag:f.src&&(h.src=f.src),null!=f.completeHandler&&(h.completeHandler=f.completeHandler),f.type&&(h.type=f.type));!1!=e&&(a.preloadHash[h.src]||(a.preloadHash[h.src]=[]),a.preloadHash[h.src].push({src:b,id:g,data:c}),1==a.preloadHash[h.src].length&&(null==l&&(l=""),a.activePlugin.preload(h.src,f,l)));return h};a.registerManifest=function(b,a){for(var c=[],e=0,d=b.length;e<d;e++)c[e]=createjs.Sound.registerSound(b[e].src,b[e].id,b[e].data,
b[e].preload,a);return c};a.removeSound=function(b){if(null==a.activePlugin)return!1;b instanceof Object&&(b=b.src);b=a.getSrcById(b);b=a.parsePath(b);if(null==b)return!1;b=b.src;for(var c in a.idHash)a.idHash[c]==b&&delete a.idHash[c];d.removeSrc(b);delete a.preloadHash[b];a.activePlugin.removeSound(b);return!0};a.removeManifest=function(b){for(var a=[],c=0,e=b.length;c<e;c++)a[c]=createjs.Sound.removeSound(b[c].src);return a};a.removeAllSounds=function(){a.idHash={};a.preloadHash={};d.removeAll();
a.activePlugin.removeAllSounds()};a.loadComplete=function(b){var c=a.parsePath(b,"sound");b=c?a.getSrcById(c.src):a.getSrcById(b);return!0==a.preloadHash[b][0]};a.parsePath=function(b,c,j,e){"string"!=typeof b&&(b=b.toString());b=b.split(a.DELIMITER);c={type:c||"sound",id:j,data:e};j=a.getCapabilities();e=0;for(var d=b.length;e<d;e++){var h=b[e],f=h.match(a.FILE_PATTERN);if(null==f)return!1;var m=f[4],f=f[5];if(j[f]&&-1<a.SUPPORTED_EXTENSIONS.indexOf(f))return c.name=m,c.src=h,c.extension=f,c}return null};
a.play=function(b,c,j,e,d,h,f){b=a.createInstance(b);a.playInstance(b,c,j,e,d,h,f)||b.playFailed();return b};a.createInstance=function(b){if(!a.initializeDefaultPlugins())return a.defaultSoundInstance;b=a.getSrcById(b);b=a.parsePath(b,"sound");var c=null;null!=b&&null!=b.src?(d.create(b.src),c=a.activePlugin.create(b.src)):c=a.defaultSoundInstance;c.uniqueId=a.lastId++;return c};a.setVolume=function(b){if(null==Number(b))return!1;b=Math.max(0,Math.min(1,b));a.masterVolume=b;if(!this.activePlugin||
!this.activePlugin.setVolume||!this.activePlugin.setVolume(b))for(var c=this.instances,j=0,e=c.length;j<e;j++)c[j].setMasterVolume(b)};a.getVolume=function(){return a.masterVolume};a.mute=function(b){this.masterMute=b;if(!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(b))for(var a=this.instances,c=0,e=a.length;c<e;c++)a[c].setMasterMute(b)};a.setMute=function(b){if(null==b||void 0==b)return!1;this.masterMute=b;if(!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(b))for(var a=
this.instances,c=0,e=a.length;c<e;c++)a[c].setMasterMute(b);return!0};a.getMute=function(){return this.masterMute};a.stop=function(){for(var b=this.instances,a=b.length;a--;)b[a].stop()};a.playInstance=function(b,c,d,e,f,h,k){c instanceof Object&&(d=c.delay,e=c.offset,f=c.loop,h=c.volume,k=c.pan);c=c||a.defaultInterruptBehavior;null==d&&(d=0);null==e&&(e=b.getPosition());null==f&&(f=0);null==h&&(h=b.volume);null==k&&(k=b.pan);if(0==d){if(!a.beginPlaying(b,c,e,f,h,k))return!1}else d=setTimeout(function(){a.beginPlaying(b,
c,e,f,h,k)},d),b.delayTimeoutId=d;this.instances.push(b);return!0};a.beginPlaying=function(b,a,c,e,f,h){return!d.add(b,a)?!1:!b.beginPlaying(c,e,f,h)?(b=this.instances.indexOf(b),-1<b&&this.instances.splice(b,1),!1):!0};a.getSrcById=function(b){return null==a.idHash||null==a.idHash[b]?b:a.idHash[b]};a.playFinished=function(b){d.remove(b);b=this.instances.indexOf(b);-1<b&&this.instances.splice(b,1)};a.proxy=function(b,a){return function(){return b.apply(a,arguments)}};createjs.Sound=a;createjs.proxy=
function(b,a){var c=Array.prototype.slice.call(arguments,2);return function(){return b.apply(a,Array.prototype.slice.call(arguments,0).concat(c))}};d.channels={};d.create=function(b,a){return null==d.get(b)?(d.channels[b]=new d(b,a),!0):!1};d.removeSrc=function(b){var a=d.get(b);if(null==a)return!1;a.removeAll();delete d.channels[b];return!0};d.removeAll=function(){for(var b in d.channels)d.channels[b].removeAll();d.channels={}};d.add=function(b,a){var c=d.get(b.src);return null==c?!1:c.add(b,a)};
d.remove=function(b){var a=d.get(b.src);if(null==a)return!1;a.remove(b);return!0};d.maxPerChannel=function(){return c.maxDefault};d.get=function(b){return d.channels[b]};var c=d.prototype={src:null,max:null,maxDefault:100,length:0,init:function(b,a){this.src=b;this.max=a||this.maxDefault;-1==this.max&&this.max==this.maxDefault;this.instances=[]},get:function(b){return this.instances[b]},add:function(b,a){if(!this.getSlot(a,b))return!1;this.instances.push(b);this.length++;return!0},remove:function(b){b=
this.instances.indexOf(b);if(-1==b)return!1;this.instances.splice(b,1);this.length--;return!0},removeAll:function(){for(var b=this.length-1;0<=b;b--)this.instances[b].stop()},getSlot:function(b){for(var c,d,e=0,f=this.max;e<f;e++){c=this.get(e);if(null==c)return!0;if(!(b==a.INTERRUPT_NONE&&c.playState!=a.PLAY_FINISHED))if(0==e)d=c;else if(c.playState==a.PLAY_FINISHED||c.playState==a.PLAY_INTERRUPTED||c.playState==a.PLAY_FAILED)d=c;else if(b==a.INTERRUPT_EARLY&&c.getPosition()<d.getPosition()||b==
a.INTERRUPT_LATE&&c.getPosition()>d.getPosition())d=c}return null!=d?(d.interrupt(),this.remove(d),!0):!1},toString:function(){return"[Sound SoundChannel]"}};a.defaultSoundInstance=new function(){this.isDefault=!0;this.addEventListener=this.removeEventListener=this.removeAllEventListener=this.dispatchEvent=this.hasEventListener=this._listeners=this.interrupt=this.playFailed=this.pause=this.resume=this.play=this.beginPlaying=this.cleanUp=this.stop=this.setMasterVolume=this.setVolume=this.mute=this.setMute=
this.getMute=this.setPan=this.getPosition=this.setPosition=function(){return!1};this.getVolume=this.getPan=this.getDuration=function(){return 0};this.playState=a.PLAY_FAILED;this.toString=function(){return"[Sound Default Sound Instance]"}};f.init=function(){var b=navigator.userAgent;f.isFirefox=-1<b.indexOf("Firefox");f.isOpera=null!=window.opera;f.isChrome=-1<b.indexOf("Chrome");f.isIOS=-1<b.indexOf("iPod")||-1<b.indexOf("iPhone")||-1<b.indexOf("iPad");f.isAndroid=-1<b.indexOf("Android");f.isBlackberry=
-1<b.indexOf("Blackberry")};f.init();createjs.Sound.BrowserDetect=f;Array.prototype.indexOf||(Array.prototype.indexOf=function(b){if(null==this)throw new TypeError;var a=Object(this),c=a.length>>>0;if(0===c)return-1;var d=0;1<arguments.length&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&(Infinity!=d&&-Infinity!=d)&&(d=(0<d||-1)*Math.floor(Math.abs(d))));if(d>=c)return-1;for(d=0<=d?d:Math.max(c-Math.abs(d),0);d<c;d++)if(d in a&&a[d]===b)return d;return-1})})();this.createjs=this.createjs||{};
(function(){function a(){this.init()}function d(a,b){this.init(a,b)}function f(a,b){this.init(a,b)}a.capabilities=null;a.isSupported=function(){var c=createjs.Sound.BrowserDetect.isIOS||createjs.Sound.BrowserDetect.isAndroid||createjs.Sound.BrowserDetect.isBlackberry;if("file:"==location.protocol&&!c&&!this.isFileXHRSupported())return!1;a.generateCapabilities();return null==a.context?!1:!0};a.isFileXHRSupported=function(){var a=!0,b=new XMLHttpRequest;try{b.open("GET","fail.fail",!1)}catch(d){return a=
!1}b.onerror=function(){a=!1};b.onload=function(){a=404==this.status||200==this.status||0==this.status&&""!=this.response};try{b.send()}catch(j){a=!1}return a};a.generateCapabilities=function(){if(null==a.capabilities){var c=document.createElement("audio");if(null==c.canPlayType)return null;if(window.webkitAudioContext)a.context=new webkitAudioContext;else if(window.AudioContext)a.context=new AudioContext;else return null;a.compatibilitySetUp();a.playEmptySound();a.capabilities={panning:!0,volume:!0,
tracks:-1};for(var b=createjs.Sound.SUPPORTED_EXTENSIONS,d=createjs.Sound.EXTENSION_MAP,j=0,e=b.length;j<e;j++){var f=b[j],h=d[f]||f;a.capabilities[f]="no"!=c.canPlayType("audio/"+f)&&""!=c.canPlayType("audio/"+f)||"no"!=c.canPlayType("audio/"+h)&&""!=c.canPlayType("audio/"+h)}2>a.context.destination.numberOfChannels&&(a.capabilities.panning=!1);a.dynamicsCompressorNode=a.context.createDynamicsCompressor();a.dynamicsCompressorNode.connect(a.context.destination);a.gainNode=a.context.createGain();a.gainNode.connect(a.dynamicsCompressorNode)}};
a.compatibilitySetUp=function(){if(!a.context.createGain){a.context.createGain=a.context.createGainNode;var c=a.context.createBufferSource();c.__proto__.start=c.__proto__.noteGrainOn;c.__proto__.stop=c.__proto__.noteOff;this.panningModel=0}};a.playEmptySound=function(){var a=this.context.createBuffer(1,1,22050),b=this.context.createBufferSource();b.buffer=a;b.connect(this.context.destination);b.start(0,0,0)};a.prototype={capabilities:null,volume:1,context:null,panningModel:"equalpower",dynamicsCompressorNode:null,
gainNode:null,arrayBuffers:null,init:function(){this.capabilities=a.capabilities;this.arrayBuffers={};this.context=a.context;this.gainNode=a.gainNode;this.dynamicsCompressorNode=a.dynamicsCompressorNode},register:function(a){this.arrayBuffers[a]=!0;return{tag:new f(a,this)}},isPreloadStarted:function(a){return null!=this.arrayBuffers[a]},isPreloadComplete:function(a){return!(null==this.arrayBuffers[a]||!0==this.arrayBuffers[a])},removeFromPreload:function(a){delete this.arrayBuffers[a]},removeSound:function(a){delete this.arrayBuffers[a]},
removeAllSounds:function(){this.arrayBuffers={}},addPreloadResults:function(a,b){this.arrayBuffers[a]=b},handlePreloadComplete:function(){createjs.Sound.sendFileLoadEvent(this.src)},preload:function(a,b,d){this.arrayBuffers[a]=!0;a=new f(a,this);a.onload=this.handlePreloadComplete;null!=d&&(a.src=d+a.src);a.load()},create:function(a){this.isPreloadStarted(a)||this.preload(a);return new d(a,this)},setVolume:function(a){this.volume=a;this.updateVolume();return!0},updateVolume:function(){var a=createjs.Sound.masterMute?
0:this.volume;a!=this.gainNode.gain.value&&(this.gainNode.gain.value=a)},getVolume:function(){return this.volume},setMute:function(){this.updateVolume();return!0},toString:function(){return"[WebAudioPlugin]"}};createjs.WebAudioPlugin=a;d.prototype={src:null,uniqueId:-1,playState:null,owner:null,offset:0,delay:0,_volume:1,get volume(){return this._volume},set volume(a){if(null==Number(a))return!1;this._volume=a=Math.max(0,Math.min(1,a));this.updateVolume()},_pan:0,get pan(){return this._pan},set pan(a){if(!this.owner.capabilities.panning||
null==Number(a))return!1;this._pan=a=Math.max(-1,Math.min(1,a));this.panNode.setPosition(a,0,-0.5)},duration:0,remainingLoops:0,delayTimeoutId:null,soundCompleteTimeout:null,panNode:null,gainNode:null,sourceNode:null,sourceNodeNext:null,muted:!1,paused:!1,startTime:0,addEventListener:null,removeEventListener:null,removeAllEventListeners:null,dispatchEvent:null,hasEventListener:null,_listeners:null,endedHandler:null,readyHandler:null,stalledHandler:null,sendEvent:function(a){a=new createjs.Event(a);
this.dispatchEvent(a)},init:function(a,b){this.owner=b;this.src=a;this.panNode=this.owner.context.createPanner();this.panNode.panningModel=this.owner.panningModel;this.gainNode=this.owner.context.createGain();this.gainNode.connect(this.panNode);this.owner.isPreloadComplete(this.src)&&(this.duration=1E3*this.owner.arrayBuffers[this.src].duration);this.endedHandler=createjs.proxy(this.handleSoundComplete,this);this.readyHandler=createjs.proxy(this.handleSoundReady,this);this.stalledHandler=createjs.proxy(this.handleSoundStalled,
this)},cleanUp:function(){this.sourceNode&&this.sourceNode.playbackState!=this.sourceNode.UNSCHEDULED_STATE&&(this.sourceNode=this.cleanUpAudioNode(this.sourceNode),this.sourceNodeNext=this.cleanUpAudioNode(this.sourceNodeNext));0!=this.panNode.numberOfOutputs&&this.panNode.disconnect(0);clearTimeout(this.delayTimeoutId);clearTimeout(this.soundCompleteTimeout);this.startTime=0;null!=window.createjs&&createjs.Sound.playFinished(this)},cleanUpAudioNode:function(a){a&&(a.stop(0),a.disconnect(this.gainNode),
a=null);return a},interrupt:function(){this.playState=createjs.Sound.PLAY_INTERRUPTED;this.cleanUp();this.paused=!1;this.sendEvent("interrupted")},handleSoundStalled:function(){this.sendEvent("failed")},handleSoundReady:function(){if(null!=window.createjs)if(1E3*this.offset>this.getDuration())this.playFailed();else{0>this.offset&&(this.offset=0);this.playState=createjs.Sound.PLAY_SUCCEEDED;this.paused=!1;this.panNode.connect(this.owner.gainNode);var a=this.owner.arrayBuffers[this.src].duration;this.sourceNode=
this.createAndPlayAudioNode(this.owner.context.currentTime-a,this.offset);this.duration=1E3*a;this.startTime=this.sourceNode.startTime-this.offset;this.soundCompleteTimeout=setTimeout(this.endedHandler,1E3*(a-this.offset));0!=this.remainingLoops&&(this.sourceNodeNext=this.createAndPlayAudioNode(this.startTime,0))}},createAndPlayAudioNode:function(a,b){var d=this.owner.context.createBufferSource();d.buffer=this.owner.arrayBuffers[this.src];d.connect(this.gainNode);d.startTime=a+d.buffer.duration;d.start(d.startTime,
b,d.buffer.duration-b);return d},play:function(a,b,d,f,e,l){this.cleanUp();createjs.Sound.playInstance(this,a,b,d,f,e,l)},beginPlaying:function(a,b,d,f){if(null!=window.createjs&&this.src){this.offset=a/1E3;this.remainingLoops=b;this.volume=d;this.pan=f;if(this.owner.isPreloadComplete(this.src))return this.handleSoundReady(null),this.sendEvent("succeeded"),1;this.playFailed()}},pause:function(){return!this.paused&&this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.paused=!0,this.offset=this.owner.context.currentTime-
this.startTime,this.cleanUpAudioNode(this.sourceNode),this.cleanUpAudioNode(this.sourceNodeNext),0!=this.panNode.numberOfOutputs&&this.panNode.disconnect(),clearTimeout(this.delayTimeoutId),clearTimeout(this.soundCompleteTimeout),!0):!1},resume:function(){if(!this.paused)return!1;this.handleSoundReady(null);return!0},stop:function(){this.playState=createjs.Sound.PLAY_FINISHED;this.cleanUp();this.offset=0;return!0},setVolume:function(a){this.volume=a;return!0},updateVolume:function(){var a=this.muted?
0:this._volume;return a!=this.gainNode.gain.value?(this.gainNode.gain.value=a,!0):!1},getVolume:function(){return this.volume},mute:function(a){this.muted=a;this.updateVolume();return!0},setMute:function(a){if(null==a||void 0==a)return!1;this.muted=a;this.updateVolume();return!0},getMute:function(){return this.muted},setPan:function(a){this.pan=a;if(this.pan!=a)return!1},getPan:function(){return this.pan},getPosition:function(){return 1E3*(this.paused||null==this.sourceNode?this.offset:this.owner.context.currentTime-
this.startTime)},setPosition:function(a){this.offset=a/1E3;this.sourceNode&&this.sourceNode.playbackState!=this.sourceNode.UNSCHEDULED_STATE&&(this.cleanUpAudioNode(this.sourceNode),this.cleanUpAudioNode(this.sourceNodeNext),clearTimeout(this.soundCompleteTimeout));!this.paused&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&this.handleSoundReady(null);return!0},getDuration:function(){return this.duration},handleSoundComplete:function(){this.offset=0;0!=this.remainingLoops?(this.remainingLoops--,
this.sourceNodeNext?(this.cleanUpAudioNode(this.sourceNode),this.sourceNode=this.sourceNodeNext,this.startTime=this.sourceNode.startTime,this.sourceNodeNext=this.createAndPlayAudioNode(this.startTime,0),this.soundCompleteTimeout=setTimeout(this.endedHandler,this.duration)):this.handleSoundReady(null),this.sendEvent("loop")):null!=window.createjs&&(this.playState=createjs.Sound.PLAY_FINISHED,this.cleanUp(),this.sendEvent("complete"))},playFailed:function(){null!=window.createjs&&(this.playState=createjs.Sound.PLAY_FAILED,
this.cleanUp(),this.sendEvent("failed"))},toString:function(){return"[WebAudioPlugin SoundInstance]"}};createjs.EventDispatcher.initialize(d.prototype);f.prototype={request:null,owner:null,progress:-1,src:null,originalSrc:null,result:null,onload:null,onprogress:null,onError:null,init:function(a,b){this.originalSrc=this.src=a;this.owner=b},load:function(a){null!=a&&(this.src=a);this.request=new XMLHttpRequest;this.request.open("GET",this.src,!0);this.request.responseType="arraybuffer";this.request.onload=
createjs.proxy(this.handleLoad,this);this.request.onError=createjs.proxy(this.handleError,this);this.request.onprogress=createjs.proxy(this.handleProgress,this);this.request.send()},handleProgress:function(a,b){this.progress=a/b;null!=this.onprogress&&this.onprogress({loaded:a,total:b,progress:this.progress})},handleLoad:function(){a.context.decodeAudioData(this.request.response,createjs.proxy(this.handleAudioDecoded,this),createjs.proxy(this.handleError,this))},handleAudioDecoded:function(a){this.progress=
1;this.result=a;this.src=this.originalSrc;this.owner.addPreloadResults(this.src,this.result);this.onload&&this.onload()},handleError:function(a){this.owner.removeSound(this.src);this.onerror&&this.onerror(a)},toString:function(){return"[WebAudioPlugin WebAudioLoader]"}}})();this.createjs=this.createjs||{};
(function(){function a(){this.init()}function d(a,c){this.init(a,c)}function f(a,c){this.init(a,c)}function c(a){this.init(a)}a.MAX_INSTANCES=30;a.capabilities=null;a.AUDIO_READY="canplaythrough";a.AUDIO_ENDED="ended";a.AUDIO_SEEKED="seeked";a.AUDIO_ERROR="error";a.AUDIO_STALLED="stalled";a.enableIOS=!1;a.isSupported=function(){if(createjs.Sound.BrowserDetect.isIOS&&!a.enableIOS)return!1;a.generateCapabilities();return null==a.tag||null==a.capabilities?!1:!0};a.generateCapabilities=function(){if(null==
a.capabilities){var b=a.tag=document.createElement("audio");if(null==b.canPlayType)return null;a.capabilities={panning:!0,volume:!0,tracks:-1};for(var c=createjs.Sound.SUPPORTED_EXTENSIONS,d=createjs.Sound.EXTENSION_MAP,e=0,f=c.length;e<f;e++){var h=c[e],k=d[h]||h;a.capabilities[h]="no"!=b.canPlayType("audio/"+h)&&""!=b.canPlayType("audio/"+h)||"no"!=b.canPlayType("audio/"+k)&&""!=b.canPlayType("audio/"+k)}}};a.prototype={capabilities:null,audioSources:null,defaultNumChannels:2,loadedHandler:null,
init:function(){this.capabilities=a.capabilities;this.audioSources={}},register:function(a,d){this.audioSources[a]=!0;for(var f=c.get(a),e=null,l=d||this.defaultNumChannels,h=0;h<l;h++)e=this.createTag(a),f.add(e);e.id=a;this.loadedHandler=createjs.proxy(this.handleTagLoad,this);e.addEventListener&&e.addEventListener("canplaythrough",this.loadedHandler);if(null==e.onreadystatechange)e.onreadystatechange=this.loadedHandler;else{var k=e.onreadystatechange;e.onreadystatechange=function(){k();this.loadedHandler()}}return{tag:e,
numChannels:l}},handleTagLoad:function(a){a.target.removeEventListener&&a.target.removeEventListener("canplaythrough",this.loadedHandler);a.target.onreadystatechange=null;a.target.src!=a.target.id&&c.checkSrc(a.target.id)},createTag:function(a){var c=document.createElement("audio");c.autoplay=!1;c.preload="none";c.src=a;return c},removeSound:function(a){delete this.audioSources[a];c.remove(a)},removeAllSounds:function(){this.audioSources={};c.removeAll()},create:function(a){if(!this.isPreloadStarted(a)){var g=
c.get(a),f=this.createTag(a);f.id=a;g.add(f);this.preload(a,{tag:f})}return new d(a,this)},isPreloadStarted:function(a){return null!=this.audioSources[a]},preload:function(a,c,d){this.audioSources[a]=!0;null!=d&&(c.tag.src=d+a);new f(a,c.tag)},toString:function(){return"[HTMLAudioPlugin]"}};createjs.HTMLAudioPlugin=a;d.prototype={src:null,uniqueId:-1,playState:null,owner:null,loaded:!1,offset:0,delay:0,_volume:1,get volume(){return this._volume},set volume(a){null!=Number(a)&&(this._volume=a=Math.max(0,
Math.min(1,a)),this.updateVolume())},pan:0,duration:0,remainingLoops:0,delayTimeoutId:null,tag:null,muted:!1,paused:!1,addEventListener:null,removeEventListener:null,removeAllEventListeners:null,dispatchEvent:null,hasEventListener:null,_listeners:null,onComplete:null,onLoop:null,onReady:null,onPlayFailed:null,onPlayInterrupted:null,onPlaySucceeded:null,endedHandler:null,readyHandler:null,stalledHandler:null,loopHandler:null,init:function(a,c){this.src=a;this.owner=c;this.endedHandler=createjs.proxy(this.handleSoundComplete,
this);this.readyHandler=createjs.proxy(this.handleSoundReady,this);this.stalledHandler=createjs.proxy(this.handleSoundStalled,this);this.loopHandler=createjs.proxy(this.handleSoundLoop,this)},sendEvent:function(a){a=new createjs.Event(a);this.dispatchEvent(a)},cleanUp:function(){var a=this.tag;if(null!=a){a.pause();a.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_ENDED,this.endedHandler,!1);a.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_READY,this.readyHandler,!1);a.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_SEEKED,
this.loopHandler,!1);try{a.currentTime=0}catch(d){}c.setInstance(this.src,a);this.tag=null}clearTimeout(this.delayTimeoutId);null!=window.createjs&&createjs.Sound.playFinished(this)},interrupt:function(){null!=this.tag&&(this.playState=createjs.Sound.PLAY_INTERRUPTED,this.cleanUp(),this.paused=!1,this.sendEvent("interrupted"))},play:function(a,c,d,e,f,h){this.cleanUp();createjs.Sound.playInstance(this,a,c,d,e,f,h)},beginPlaying:function(a,d,f,e){if(null==window.createjs)return-1;var l=this.tag=c.getInstance(this.src);
if(null==l)return this.playFailed(),-1;l.addEventListener(createjs.HTMLAudioPlugin.AUDIO_ENDED,this.endedHandler,!1);this.offset=a;this.volume=f;this.pan=e;this.updateVolume();this.remainingLoops=d;4!==l.readyState?(l.addEventListener(createjs.HTMLAudioPlugin.AUDIO_READY,this.readyHandler,!1),l.addEventListener(createjs.HTMLAudioPlugin.AUDIO_STALLED,this.stalledHandler,!1),l.preload="auto",l.load()):this.handleSoundReady(null);this.sendEvent("succeeded");return 1},handleSoundStalled:function(){this.cleanUp();
this.sendEvent("failed")},handleSoundReady:function(){null!=window.createjs&&(this.duration=1E3*this.tag.duration,this.playState=createjs.Sound.PLAY_SUCCEEDED,this.paused=!1,this.tag.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_READY,this.readyHandler,!1),this.offset>=this.getDuration()?this.playFailed():(0<this.offset&&(this.tag.currentTime=0.0010*this.offset),-1==this.remainingLoops&&(this.tag.loop=!0),0!=this.remainingLoops&&(this.tag.addEventListener(createjs.HTMLAudioPlugin.AUDIO_SEEKED,
this.loopHandler,!1),this.tag.loop=!0),this.tag.play()))},pause:function(){return!this.paused&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&null!=this.tag?(this.paused=!0,this.tag.pause(),clearTimeout(this.delayTimeoutId),!0):!1},resume:function(){if(!this.paused||null==this.tag)return!1;this.paused=!1;this.tag.play();return!0},stop:function(){this.offset=0;this.pause();this.playState=createjs.Sound.PLAY_FINISHED;this.cleanUp();return!0},setMasterVolume:function(){this.updateVolume();return!0},
setVolume:function(a){this.volume=a;return!0},updateVolume:function(){if(null!=this.tag){var a=this.muted||createjs.Sound.masterMute?0:this._volume*createjs.Sound.masterVolume;a!=this.tag.volume&&(this.tag.volume=a);return!0}return!1},getVolume:function(){return this.volume},mute:function(a){this.muted=a;this.updateVolume();return!0},setMasterMute:function(){this.updateVolume();return!0},setMute:function(a){if(null==a||void 0==a)return!1;this.muted=a;this.updateVolume();return!0},getMute:function(){return this.muted},
setPan:function(){return!1},getPan:function(){return 0},getPosition:function(){return null==this.tag?this.offset:1E3*this.tag.currentTime},setPosition:function(a){if(null==this.tag)this.offset=a;else{this.tag.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_SEEKED,this.loopHandler,!1);try{this.tag.currentTime=0.0010*a}catch(c){return!1}this.tag.addEventListener(createjs.HTMLAudioPlugin.AUDIO_SEEKED,this.loopHandler,!1)}return!0},getDuration:function(){return this.duration},handleSoundComplete:function(){this.offset=
0;null!=window.createjs&&(this.playState=createjs.Sound.PLAY_FINISHED,this.cleanUp(),this.sendEvent("complete"))},handleSoundLoop:function(){this.offset=0;this.remainingLoops--;0==this.remainingLoops&&(this.tag.loop=!1,this.tag.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_SEEKED,this.loopHandler,!1));this.sendEvent("loop")},playFailed:function(){null!=window.createjs&&(this.playState=createjs.Sound.PLAY_FAILED,this.cleanUp(),this.sendEvent("failed"))},toString:function(){return"[HTMLAudioPlugin SoundInstance]"}};
createjs.EventDispatcher.initialize(d.prototype);f.prototype={src:null,tag:null,preloadTimer:null,loadedHandler:null,init:function(a,c){this.src=a;this.tag=c;this.preloadTimer=setInterval(createjs.proxy(this.preloadTick,this),200);this.loadedHandler=createjs.proxy(this.sendLoadedEvent,this);this.tag.addEventListener&&this.tag.addEventListener("canplaythrough",this.loadedHandler);if(null==this.tag.onreadystatechange)this.tag.onreadystatechange=createjs.proxy(this.sendLoadedEvent,this);else{var d=this.tag.onreadystatechange;
this.tag.onreadystatechange=function(){d();this.tag.onreadystatechange=createjs.proxy(this.sendLoadedEvent,this)}}this.tag.preload="auto";this.tag.load()},preloadTick:function(){var a=this.tag.buffered,c=this.tag.duration;0<a.length&&a.end(0)>=c-1&&this.handleTagLoaded()},handleTagLoaded:function(){clearInterval(this.preloadTimer)},sendLoadedEvent:function(){this.tag.removeEventListener&&this.tag.removeEventListener("canplaythrough",this.loadedHandler);this.tag.onreadystatechange=null;createjs.Sound.sendFileLoadEvent(this.src)},
toString:function(){return"[HTMLAudioPlugin HTMLAudioLoader]"}};c.tags={};c.get=function(a){var d=c.tags[a];null==d&&(d=c.tags[a]=new c(a));return d};c.remove=function(a){var d=c.tags[a];if(null==d)return!1;d.removeAll();delete c.tags[a];return!0};c.removeAll=function(){for(var a in c.tags)c.tags[a].removeAll();c.tags={}};c.getInstance=function(a){a=c.tags[a];return null==a?null:a.get()};c.setInstance=function(a,d){var f=c.tags[a];return null==f?null:f.set(d)};c.checkSrc=function(a){a=c.tags[a];if(null==
a)return null;a.checkSrcChange()};c.prototype={src:null,length:0,available:0,tags:null,init:function(a){this.src=a;this.tags=[]},add:function(a){this.tags.push(a);this.length++;this.available++},removeAll:function(){for(;this.length--;)delete this.tags[this.length];this.src=null;this.tags.length=0},get:function(){if(0==this.tags.length)return null;this.available=this.tags.length;var a=this.tags.pop();null==a.parentNode&&document.body.appendChild(a);return a},set:function(a){-1==this.tags.indexOf(a)&&
this.tags.push(a);this.available=this.tags.length},checkSrcChange:function(){for(var a=this.length-1,c=this.tags[a].src;a--;)this.tags[a].src=c},toString:function(){return"[HTMLAudioPlugin TagPool]"}}})();(function(){var a=this.createjs=this.createjs||{},a=a.SoundJS=a.SoundJS||{};a.version="NEXT";a.buildDate="Mon, 22 Jul 2013 22:30:40 GMT"})();
